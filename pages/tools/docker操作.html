<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>docker 命令 | 小魏同学的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/icon.png">
    <meta name="description" content="点滴学习记录">
    
    <link rel="preload" href="/assets/css/0.styles.fd72d8d4.css" as="style"><link rel="preload" href="/assets/js/app.5c1b57ed.js" as="script"><link rel="preload" href="/assets/js/2.219bfd91.js" as="script"><link rel="preload" href="/assets/js/23.53acf99f.js" as="script"><link rel="prefetch" href="/assets/js/10.33d18704.js"><link rel="prefetch" href="/assets/js/11.98e3596c.js"><link rel="prefetch" href="/assets/js/12.52c259df.js"><link rel="prefetch" href="/assets/js/13.0c68c86f.js"><link rel="prefetch" href="/assets/js/14.770f2800.js"><link rel="prefetch" href="/assets/js/15.56d2c625.js"><link rel="prefetch" href="/assets/js/16.ef638dbd.js"><link rel="prefetch" href="/assets/js/17.37c996f0.js"><link rel="prefetch" href="/assets/js/18.83288f53.js"><link rel="prefetch" href="/assets/js/19.5ad535fb.js"><link rel="prefetch" href="/assets/js/20.a3d384c2.js"><link rel="prefetch" href="/assets/js/21.274e9fa8.js"><link rel="prefetch" href="/assets/js/22.08bd1ce9.js"><link rel="prefetch" href="/assets/js/24.5c0072b9.js"><link rel="prefetch" href="/assets/js/3.bb6241e9.js"><link rel="prefetch" href="/assets/js/4.7adb1798.js"><link rel="prefetch" href="/assets/js/5.d3359473.js"><link rel="prefetch" href="/assets/js/6.5eff19f1.js"><link rel="prefetch" href="/assets/js/7.8dbf1c37.js"><link rel="prefetch" href="/assets/js/8.0e0f227d.js"><link rel="prefetch" href="/assets/js/9.82bb104a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fd72d8d4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icon.png" alt="小魏同学的博客" class="logo"> <span class="site-name can-hide">小魏同学的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/java/jdk8.html" class="nav-link">
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/pages/java/dubbo.html" class="nav-link">
  Java框架
</a></li></ul></div></div><div class="nav-item"><a href="/pages/deeplearning/01-CNN手写数字.html" class="nav-link">
  深度学习
</a></div><div class="nav-item"><a href="/pages/tools/docker操作.html" class="nav-link">
  工具
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/java/jdk8.html" class="nav-link">
  Java基础
</a></li><li class="dropdown-item"><!----> <a href="/pages/java/dubbo.html" class="nav-link">
  Java框架
</a></li></ul></div></div><div class="nav-item"><a href="/pages/deeplearning/01-CNN手写数字.html" class="nav-link">
  深度学习
</a></div><div class="nav-item"><a href="/pages/tools/docker操作.html" class="nav-link">
  工具
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/java/01-jdk8.html" class="sidebar-link">jdk8新特性</a></li><li><a href="/pages/java/02-spring.html" class="sidebar-link">Spring5</a></li><li><a href="/pages/java/dubbo.html" class="sidebar-link">springcloud alibaba nacos dubbo 整合</a></li><li><a href="/pages/java/rocketmq.html" class="sidebar-link">/pages/java/rocketmq.html</a></li><li><a href="/pages/java/seata.html" class="sidebar-link">seata 分布式事务</a></li><li><a href="/pages/java/springboot.html" class="sidebar-link">springboot</a></li><li><a href="/pages/java/springboot_thread.html" class="sidebar-link">在springboot项目中使用异步来发送短信</a></li><li><a href="/pages/java/springcloud.html" class="sidebar-link">开始搭建 springcloud 脚手架</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深度学习</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker-命令"><a href="#docker-命令" class="header-anchor">#</a> docker 命令</h1> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker search 镜像名称 //搜索镜像 
docker pull 镜像名称:版本号 //拉取对应版本的镜像 
docker pull 镜像名称 //默认拉取最新的镜像 
docker images //查看本地已下载的镜像 
docker <span class="token function">ps</span> //查看正在运行的容器 
docker <span class="token function">ps</span> -a //查看所有的容器（包括run、stop、exited状态的）
docker container <span class="token function">ls</span> //查看正在运行的容器
docker <span class="token function">rm</span> 容器ID //只能删除没有在运行的容器 
docker <span class="token function">rm</span> -f 容器ID //可以删除正在运行的容器 
docker run -p 本地主机端口号:容器服务端口号 --name 容器名字 <span class="token punctuation">[</span>-e 配置信息修改<span class="token punctuation">]</span> -d 镜像名字 
docker start 容器ID //启动容器 
docker stop 容器ID //终止容器 
docker rmi 镜像名称orID //删除镜像
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="docker安装"><a href="#docker安装" class="header-anchor">#</a> docker安装</h3> <p>安装依赖</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>国内源</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>更新yum缓存并安装Docker-ce</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> yum makecache fast <span class="token function">sudo</span> yum -y <span class="token function">install</span> docker-ce

systemctl start docker

docker -v

docker images
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>开机自启动</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl <span class="token builtin class-name">enable</span> docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>docker镜像加速器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /etc/docker

<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'

{

  &quot;registry-mirrors&quot;: [&quot;https://yc0s08wu.mirror.aliyuncs.com&quot;]

}

EOF</span>

<span class="token function">sudo</span> systemctl daemon-reload

<span class="token function">sudo</span> systemctl restart docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="docker安装mysql"><a href="#docker安装mysql" class="header-anchor">#</a> DOCKER安装mysql</h3> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code>docker pull mysql:8.0 docker images
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动docker中的mysql</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run  -p 3306:3306 --name mysql8.0 \

-e MYSQL_ROOT_PASSWORD=root \

-d mysql:8.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://gitee.com/ChetWei/img/raw/master/img/202109162151917.png" alt="img"></p> <p>-v参数中，冒号&quot;:&quot;前面的目录是宿主机目录，后面的目录是容器内目录</p> <p>查看容器运行情况</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker ps 

docker exec -it mysql8.0 bash 

mysql -uroot -p * select host,user,plugin from user; ALTER USER 'root'@'localhost' IDENTIFIED WITH MYSQL_NATIVE_PASSWORD BY 'opportunity'; alter user 'root'@'%' identified with mysql_native_password by 'opportunity';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="docker-安装redis"><a href="#docker-安装redis" class="header-anchor">#</a> docker 安装redis</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull redis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>容器自动启动</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run --name redis -p 6379:6379 -d --restart=always redis:latest redis-server --appendonly yes --requirepass &quot;opportunity&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="docker安装nacos"><a href="#docker安装nacos" class="header-anchor">#</a> Docker安装nacos</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull nacos/nacos-server

docker run --env MODE=standalone \

-v /data/docker/nacos/conf/:/home/nacos/conf/  \

-v /data/docker/nacos/logs/:/home/nacos/logs/  \

--name nacos -d -p 8848:8848 nacos/nacos-server

docker-compose -f example/standalone-derby.yaml up -d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h1 id="docker-desktop"><a href="#docker-desktop" class="header-anchor">#</a> docker desktop</h1> <h2 id="安装redis"><a href="#安装redis" class="header-anchor">#</a> 安装redis</h2> <p>1、docker pull redis</p> <p>2、配置本地映射配置文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#redsi配置文件位置</span>
/E/docker-v/redis/conf/redis_6379.conf
<span class="token comment">#redis数据存放位置</span>
/E/docker-v/redis/data
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>3、启动redis</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker run --name redis -p <span class="token number">6379</span>:6379 -v /E/docker-v/redis/conf/redis_6379.conf:/etc/redis/redis_6379.conf -v /E/docker-v/redis/data:/data/ -d redis:latest redis-server /etc/redis/redis_6379.conf --appendonly <span class="token function">yes</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="安装nacos"><a href="#安装nacos" class="header-anchor">#</a> 安装nacos</h2> <p>1、拉取镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker pull nacos/nacos-server:1.4.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、创建本地映射目录</p> <p>3、启动</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker run --env <span class="token assign-left variable">MODE</span><span class="token operator">=</span>standalone --name nacos -d -p <span class="token number">8848</span>:8848 nacos/nacos-server:1.4.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="安装mysql"><a href="#安装mysql" class="header-anchor">#</a> 安装mysql</h2> <p>1.下载镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker pull mysql:8.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.配置映射文件</p> <p>3.启动容器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker run  -p <span class="token number">3306</span>:3306 --name mysql8.0 
-v  /E/docker-v/mysql/conf:/etc/mysql 
-v /E/docker-v/mysql/log/:/var/log/mysql 
-v /E/docker-v/mysql/data/:/var/lib/mysql 
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root  -d mysql:8.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker run   -p <span class="token number">3306</span>:3306 --name mysql -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root -d  mysql:8.0.18
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们需要将mysql的加密方式改成 mysql_native_password。</p> <p>修改加密方式</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>alter user 'root' @  '%'  identified with mysql_native_password by 'root';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看是否将加密方式修改过来</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>select host,user,authentication_string,plugin from user;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-mysql line-numbers-mode"><pre class="language-text"><code>
use mysql
select user,host from user;

# 开放外部访问权限，根据查询出来'%'对应的用户设置
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%'  IDENTIFIED BY 'root'  WITH GRANT OPTION;
# 刷新权限
flush privileges;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="安装seata"><a href="#安装seata" class="header-anchor">#</a> 安装seata</h2> <p>拉取镜像</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull seataio/seata-server:1.4.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>docker run --name seata-server <span class="token punctuation">\</span>
        -p <span class="token number">8091</span>:8091 <span class="token punctuation">\</span>
        -e <span class="token assign-left variable">SEATA_IP</span><span class="token operator">=</span><span class="token number">192.168</span>.1.1 <span class="token punctuation">\</span>
        -e <span class="token assign-left variable">STORE_MODE</span><span class="token operator">=</span>file
        -e <span class="token assign-left variable">SEATA_PORT</span><span class="token operator">=</span><span class="token number">8091</span> <span class="token punctuation">\</span>
        seataio/seata-server:1.4.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="安装rocketmq"><a href="#安装rocketmq" class="header-anchor">#</a> 安装rocketmq</h2></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5c1b57ed.js" defer></script><script src="/assets/js/2.219bfd91.js" defer></script><script src="/assets/js/23.53acf99f.js" defer></script>
  </body>
</html>
